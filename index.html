<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>토스 스타일 To-Do</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Boxicons CDN -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'toss-blue': '#3182F6',
                        'toss-gray': '#F8F9FA',
                        'toss-dark': '#1E293B'
                    },
                    fontFamily: {
                        'sans': ['Pretendard', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-toss-gray min-h-screen font-sans">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-100">
        <div class="max-w-md mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <h1 class="text-2xl font-bold text-toss-dark">
                    할 일 목록
                </h1>
                <button 
                    type="button"
                    id="auth-btn"
                    class="px-4 py-2 text-sm text-toss-blue bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors duration-200"
                >
                    로그인
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-md mx-auto px-6 py-8">
        <!-- Add Task Form -->
        <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6">
            <form id="add-task-form" class="space-y-4">
                <div class="relative">
                    <input 
                        type="text" 
                        id="task-input" 
                        placeholder="새로운 할 일을 입력하세요"
                        class="w-full px-4 py-3 pr-12 text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-toss-blue focus:border-transparent transition-all duration-200"
                        maxlength="100"
                    >
                    <button 
                        type="submit" 
                        class="absolute right-2 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-toss-blue text-white rounded-lg flex items-center justify-center hover:bg-blue-600 transition-colors duration-200"
                    >
                        <i class='bx bx-plus text-lg'></i>
                    </button>
                </div>
                
                <!-- Priority and Tag Selection -->
                <div class="grid grid-cols-2 gap-3">
                    <!-- Priority Selection -->
                    <div class="flex items-center space-x-3">
                        <label class="text-sm font-medium text-gray-700">우선순위:</label>
                        <div class="flex space-x-1">
                            <button 
                                type="button" 
                                data-priority="high" 
                                class="priority-btn priority-high w-8 h-8 rounded-lg border-2 border-gray-200 hover:border-red-400 transition-colors duration-200"
                                title="높음 (빨간색)"
                            ></button>
                            <button 
                                type="button" 
                                data-priority="medium" 
                                class="priority-btn priority-medium w-8 h-8 rounded-lg border-2 border-gray-200 hover:border-yellow-400 transition-colors duration-200"
                                title="보통 (노란색)"
                            ></button>
                            <button 
                                type="button" 
                                data-priority="low" 
                                class="priority-btn priority-low w-8 h-8 rounded-lg border-2 border-gray-200 hover:border-gray-400 transition-colors duration-200"
                                title="낮음 (흰색)"
                            ></button>
                        </div>
                    </div>
                    
                    <!-- Tag Selection -->
                    <div class="flex items-center space-x-3">
                        <select 
                            id="task-tag" 
                            class="flex-1 px-3 py-2 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-toss-blue focus:border-transparent transition-all duration-200"
                        >
                            <option value="">태그 없음</option>
                            <!-- Tags will be populated here -->
                        </select>
                        <button 
                            type="button" 
                            id="manage-tags-btn"
                            class="px-3 py-2 text-sm text-toss-blue bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors duration-200"
                            title="태그 관리"
                        >
                            *
                        </button>
                    </div>
                </div>
            </form>
        </div>

        <!-- Filter Tabs -->
        <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-2 mb-6">
            <div class="flex space-x-1 mb-3">
                <button 
                    data-filter="all" 
                    class="filter-tab active flex-1 py-2 px-4 text-sm font-medium rounded-xl transition-all duration-200"
                >
                    전체
                </button>
                <button 
                    data-filter="active" 
                    class="filter-tab flex-1 py-2 px-4 text-sm font-medium rounded-xl transition-all duration-200"
                >
                    진행중
                </button>
                <button 
                    data-filter="completed" 
                    class="filter-tab flex-1 py-2 px-4 text-sm font-medium rounded-xl transition-all duration-200"
                >
                    완료
                </button>
            </div>
            
            <!-- Priority, Date and Tag Filter -->
            <div class="grid grid-cols-3 gap-4">
                <!-- Priority Filter -->
                <div class="flex items-center space-x-2">
                    <span class="text-xs text-gray-500">우선순위:</span>
                    <div class="flex space-x-1">
                        <button 
                            data-priority-filter="high" 
                            class="priority-filter-btn priority-high w-6 h-6 rounded border border-gray-200 hover:border-red-400 transition-colors duration-200"
                            title="높음"
                        ></button>
                        <button 
                            data-priority-filter="medium" 
                            class="priority-filter-btn priority-medium w-6 h-6 rounded border border-gray-200 hover:border-yellow-400 transition-colors duration-200"
                            title="보통"
                        ></button>
                        <button 
                            data-priority-filter="low" 
                            class="priority-filter-btn priority-low w-6 h-6 rounded border border-gray-200 hover:border-gray-400 transition-colors duration-200"
                            title="낮음"
                        ></button>
                    </div>
                </div>
                
                <!-- Date Filter -->
                <div class="flex items-center space-x-2">
                    <span class="text-xs text-gray-500">날짜별:</span>
                    <div class="flex space-x-1">
                        <button 
                            data-date-filter="today" 
                            class="date-filter-btn px-2 py-1 text-xs rounded border border-gray-200 hover:border-blue-400 transition-colors duration-200"
                            title="오늘 등록"
                        >
                            오늘
                        </button>
                        <button 
                            data-date-filter="week" 
                            class="date-filter-btn px-2 py-1 text-xs rounded border border-gray-200 hover:border-blue-400 transition-colors duration-200"
                            title="이번 주"
                        >
                            이번 주
                        </button>
                        <button 
                            data-date-filter="month" 
                            class="date-filter-btn px-2 py-1 text-xs rounded border border-gray-200 hover:border-blue-400 transition-colors duration-200"
                            title="이번 달"
                        >
                            이번 달
                        </button>
                    </div>
                </div>
                
                <!-- Tag Filter -->
                <div class="flex items-center space-x-2">
                    <select id="tag-filter-select" class="px-2 py-1 text-xs bg-gray-50 border border-gray-200 rounded focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400 transition-colors duration-200">
                        <option value="">모든 태그</option>
                        <!-- Tag options will be populated here -->
                    </select>
                </div>
            </div>
        </div>

        <!-- Task List -->
        <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
            <ul id="task-list" class="divide-y divide-gray-100">
                <!-- Tasks will be rendered here -->
            </ul>
            
            <!-- Empty State -->
            <div id="empty-state" class="hidden py-12 text-center">
                <div class="w-16 h-16 bg-gray-100 rounded-full mx-auto mb-4 flex items-center justify-center">
                    <i class='bx bx-check-circle text-2xl text-gray-400'></i>
                </div>
                <p class="text-gray-500 text-sm">할 일이 없습니다</p>
                <p class="text-gray-400 text-xs mt-1">새로운 할 일을 추가해보세요</p>
            </div>
        </div>

        <!-- Stats -->
        <div class="mt-6 text-center">
            <p id="task-stats" class="text-sm text-gray-500">
                총 0개 • 완료 0개
            </p>
        </div>
    </main>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-6 flex items-center space-x-3">
            <div class="w-6 h-6 border-2 border-toss-blue border-t-toss-blue rounded-full animate-spin"></div>
            <span class="text-gray-700">로딩 중...</span>
        </div>
    </div>

    <!-- Tag Management Modal -->
    <div id="tag-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-6 w-full max-w-md mx-4">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-lg font-semibold text-gray-900">태그 관리</h3>
                <button 
                    id="close-tag-modal"
                    class="w-8 h-8 text-gray-400 hover:text-gray-600 rounded-lg flex items-center justify-center hover:bg-gray-100 transition-colors duration-200"
                >
                    <i class='bx bx-x text-xl'></i>
                </button>
            </div>
            
            <!-- Add New Tag -->
            <div class="mb-6">
                <div class="flex space-x-2">
                    <input 
                        type="text" 
                        id="new-tag-input" 
                        placeholder="새 태그 이름"
                        class="flex-1 px-3 py-2 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-toss-blue focus:border-transparent"
                        maxlength="20"
                    >
                    <button 
                        id="add-tag-btn"
                        class="px-4 py-2 text-sm text-white bg-toss-blue rounded-lg hover:bg-blue-600 transition-colors duration-200"
                    >
                        추가
                    </button>
                </div>
            </div>
            
            <!-- Tags List -->
            <div class="space-y-2 max-h-64 overflow-y-auto">
                <div id="tags-list">
                    <!-- Tags will be populated here -->
                </div>
            </div>
            
            <div class="mt-6 pt-4 border-t border-gray-200">
                <button 
                    id="close-tag-modal-btn"
                    class="w-full px-4 py-2 text-sm text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors duration-200"
                >
                    닫기
                </button>
            </div>
        </div>
    </div>

    <!-- Task Detail Modal -->
    <div id="task-detail-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-lg font-semibold text-gray-900">할 일 상세</h3>
                <button 
                    id="close-task-detail-modal"
                    class="w-8 h-8 text-gray-400 hover:text-gray-600 rounded-lg flex items-center justify-center hover:bg-gray-100 transition-colors duration-200"
                >
                    <i class='bx bx-x text-xl'></i>
                </button>
            </div>
            
            <!-- Task Basic Info -->
            <div class="mb-6 p-4 bg-gray-50 rounded-xl">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">할 일 내용</label>
                        <div class="flex items-center space-x-2">
                            <p id="detail-task-content" class="text-gray-900 font-medium flex-1"></p>
                            <button 
                                type="button"
                                id="edit-task-content-btn"
                                class="w-6 h-6 text-gray-400 hover:text-blue-500 rounded flex items-center justify-center hover:bg-blue-50 transition-colors duration-200"
                                title="할 일 내용 수정"
                            >
                                <i class='bx bx-edit text-sm'></i>
                            </button>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">상태</label>
                        <p id="detail-task-status" class="text-sm text-gray-600"></p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">등록일</label>
                        <p id="detail-task-created" class="text-sm text-gray-600"></p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">완료일</label>
                        <p id="detail-task-completed" class="text-sm text-gray-600"></p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">우선순위</label>
                        <div id="detail-task-priority" class="flex items-center space-x-2"></div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">태그</label>
                        <div id="detail-task-tag" class="text-sm text-gray-600"></div>
                    </div>
                </div>
            </div>
            
            <!-- Task Detail Form -->
            <form id="task-detail-form" class="space-y-6">
                <input type="hidden" id="detail-task-id">
                
                <div>
                    <label for="detail-description" class="block text-sm font-medium text-gray-700 mb-2">
                        상세 설명 <span class="text-gray-500">(필수)</span>
                    </label>
                    <textarea 
                        id="detail-description" 
                        rows="4"
                        placeholder="할 일에 대한 자세한 설명을 입력하세요..."
                        class="w-full px-4 py-3 text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-toss-blue focus:border-transparent transition-all duration-200 resize-none"
                        required
                    ></textarea>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="detail-deadline" class="block text-sm font-medium text-gray-700 mb-2">
                            마감일
                        </label>
                        <input 
                            type="datetime-local" 
                            id="detail-deadline"
                            class="w-full px-4 py-3 text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-toss-blue focus:border-transparent transition-all duration-200"
                        >
                    </div>
                    <div>
                        <label for="detail-estimated-time" class="block text-sm font-medium text-gray-700 mb-2">
                            예상 소요시간
                        </label>
                        <select 
                            id="detail-estimated-time"
                            class="w-full px-4 py-3 text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-toss-blue focus:border-transparent transition-all duration-200"
                        >
                            <option value="">선택하세요</option>
                            <option value="15">15분</option>
                            <option value="30">30분</option>
                            <option value="45">45분</option>
                            <option value="60">1시간</option>
                            <option value="90">1시간 30분</option>
                            <option value="120">2시간</option>
                            <option value="180">3시간</option>
                            <option value="240">4시간</option>
                            <option value="300">5시간</option>
                            <option value="480">하루</option>
                        </select>
                    </div>
                </div>
                
                <div>
                    <label for="detail-notes" class="block text-sm font-medium text-gray-700 mb-2">
                        추가 메모
                    </label>
                    <textarea 
                        id="detail-notes" 
                        rows="3"
                        placeholder="추가적인 메모나 참고사항을 입력하세요..."
                        class="w-full px-4 py-3 text-gray-700 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-toss-blue focus:border-transparent transition-all duration-200 resize-none"
                    ></textarea>
                </div>
                
                <div class="flex items-center space-x-3">
                    <input 
                        type="checkbox" 
                        id="detail-requires-review"
                        class="w-4 h-4 text-toss-blue bg-gray-50 border-gray-300 rounded focus:ring-toss-blue focus:ring-2"
                    >
                    <label for="detail-requires-review" class="text-sm text-gray-700">
                        검토가 필요한 작업
                    </label>
                </div>
                
                <div class="flex items-center space-x-3">
                    <input 
                        type="checkbox" 
                        id="detail-is-recurring"
                        class="w-4 h-4 text-toss-blue bg-gray-50 border-gray-300 rounded focus:ring-toss-blue focus:ring-2"
                    >
                    <label for="detail-is-recurring" class="text-sm text-gray-700">
                        반복 작업
                    </label>
                </div>
                
                <div class="pt-4 border-t border-gray-200 flex space-x-3">
                    <button 
                        type="submit"
                        class="flex-1 px-4 py-3 text-white bg-toss-blue rounded-xl hover:bg-blue-600 transition-colors duration-200 font-medium"
                    >
                        저장
                    </button>
                    <button 
                        type="button"
                        id="cancel-task-detail-btn"
                        class="flex-1 px-4 py-3 text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors duration-200 font-medium"
                    >
                        취소
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-6 max-w-sm w-full mx-4 transform transition-all duration-300 scale-95 opacity-0" id="delete-modal-content">
            <div class="text-center">
                <!-- 아이콘 -->
                <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class='bx bx-trash text-2xl text-red-500'></i>
                </div>
                
                <!-- 제목 -->
                <h3 class="text-lg font-semibold text-gray-900 mb-2">할 일 삭제</h3>
                
                <!-- 설명 -->
                <p class="text-gray-600 mb-6">정말로 이 할 일을 삭제하시겠습니까?</p>
                
                <!-- 할 일 내용 미리보기 -->
                <div class="bg-gray-50 rounded-lg p-3 mb-6">
                    <p class="text-sm text-gray-700 font-medium" id="delete-task-preview">할 일 내용이 여기에 표시됩니다</p>
                </div>
                
                <!-- 버튼 그룹 -->
                <div class="flex space-x-3">
                    <button 
                        type="button"
                        id="cancel-delete-btn"
                        class="flex-1 px-4 py-2.5 text-gray-600 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors duration-200 font-medium"
                    >
                        취소
                    </button>
                    <button 
                        type="button"
                        id="confirm-delete-btn"
                        class="flex-1 px-4 py-2.5 text-white bg-red-500 rounded-xl hover:bg-red-600 transition-colors duration-200 font-medium"
                    >
                        삭제
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="auth-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4">
            <!-- Login Form -->
            <div id="login-form" class="space-y-6">
                <div class="text-center">
                    <h2 class="text-2xl font-bold text-gray-900">로그인</h2>
                    <p class="text-gray-600 mt-2">계정에 로그인하세요</p>
                </div>
                
                <form id="login-form-element" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">이메일</label>
                        <input 
                            type="email" 
                            id="login-email" 
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-toss-blue focus:border-transparent"
                            placeholder="your@email.com"
                        >
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">비밀번호</label>
                        <input 
                            type="password" 
                            id="login-password" 
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-toss-blue focus:border-transparent"
                            placeholder="••••••••"
                        >
                    </div>
                    
                    <button 
                        type="submit"
                        class="w-full bg-toss-blue text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-600 transition-colors duration-200"
                    >
                        로그인
                    </button>
                </form>
                
                <div class="text-center">
                    <button 
                        type="button"
                        id="show-signup"
                        class="text-toss-blue hover:text-blue-600 text-sm"
                    >
                        계정이 없으신가요? 회원가입
                    </button>
                </div>
            </div>

            <!-- Signup Form -->
            <div id="signup-form" class="space-y-6 hidden">
                <div class="text-center">
                    <h2 class="text-2xl font-bold text-gray-900">회원가입</h2>
                    <p class="text-gray-600 mt-2">새 계정을 만드세요</p>
                </div>
                
                <form id="signup-form-element" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">이메일</label>
                        <input 
                            type="email" 
                            id="signup-email" 
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-toss-blue focus:border-transparent"
                            placeholder="your@email.com"
                        >
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">비밀번호</label>
                        <input 
                            type="password" 
                            id="signup-password" 
                            required
                            minlength="6"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-toss-blue focus:border-transparent"
                            placeholder="••••••••"
                        >
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">비밀번호 확인</label>
                        <input 
                            type="password" 
                            id="signup-password-confirm" 
                            required
                            minlength="6"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-toss-blue focus:border-transparent"
                            placeholder="••••••••"
                        >
                    </div>
                    
                    <button 
                        type="submit"
                        class="w-full bg-toss-blue text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-600 transition-colors duration-200"
                    >
                        회원가입
                    </button>
                </form>
                
                <div class="text-center">
                    <button 
                        type="button"
                        id="show-login"
                        class="text-toss-blue hover:text-blue-600 text-sm"
                    >
                        이미 계정이 있으신가요? 로그인
                    </button>
                </div>
            </div>

            <!-- Close Button -->
            <button 
                type="button"
                id="close-auth-modal"
                class="absolute top-4 right-4 text-gray-400 hover:text-gray-600"
            >
                <i class='bx bx-x text-2xl'></i>
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="supabase-client.js"></script>
    <script type="module" src="app.js"></script>
</body>
</html> 